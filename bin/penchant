#!/usr/bin/env ruby

require 'rubygems'
require 'thor'
require 'penchant'

class PenchantCLI < Thor
  include Thor::Actions
  source_root File.expand_path('../..', __FILE__)

  desc "install", "Copy the common scripts to the project"
  method_options :dir => 'script'
  def install
    directory 'template/script', options[:dir]
    Dir[File.join(options[:dir], '**/*')].each { |file| File.chmod(0755, file) }
  end

  desc "gemfile ENV", "Switch the gemfile environment"
  def gemfile(env)
    Penchant::Gemfile.do_full_env_switch!(env)
  end

  desc "gemfile-env", "Get the gemfile environment"
  def gemfile_env
    gemfile = Penchant::Gemfile.new
    puts gemfile.environment
  end
end

PenchantCLI.start
